{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "nft-card",
  "type": "registry:ui",
  "title": "NFT Card",
  "description": "A component for displaying NFT metadata with image, attributes, and collection information using Alchemy API.",
  "dependencies": [
    "@solana/web3.js",
    "lucide-react",
    "motion"
  ],
  "registryDependencies": [
    "https://soldevkit.com/r/card.json",
    "https://soldevkit.com/r/skeleton.json",
    "https://soldevkit.com/r/badge.json",
    "https://soldevkit.com/r/utils.json",
    "https://soldevkit.com/r/error-boundary.json",
    "https://soldevkit.com/r/optimized-image.json"
  ],
  "files": [
    {
      "path": "src/registry/default/ui/nft/nft-card.tsx",
      "content": "\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport {\n  cn,\n  shortAddress,\n  fetchNFTMetadata,\n  fetchNFTPrice,\n  type NFTMetadata,\n  type NFTPrice,\n} from \"@/lib/utils\";\nimport { motion } from \"motion/react\";\nimport { ExternalLink, Image as ImageIcon, Loader2, Copy, Check } from \"lucide-react\";\nimport { APIErrorBoundary } from \"@/components/soldevkit-ui/error-boundary/error-boundary\";\nimport { OptimizedImage } from \"@/components/soldevkit-ui/optimized-image/optimized-image\";\n\nexport interface NFTCardProps {\n  /** The mint address of the NFT */\n  mintAddress: string | PublicKey;\n  /** Custom CSS classes */\n  className?: string;\n  /** Show NFT attributes */\n  showAttributes?: boolean;\n  /** Show collection info */\n  showCollection?: boolean;\n  /** Show price information */\n  showPrice?: boolean;\n  /** Card variant */\n  variant?: \"default\" | \"compact\" | \"detailed\";\n  /** Loading state */\n  isLoading?: boolean;\n  /** Click handler */\n  onClick?: () => void;\n  /** Custom metadata (bypasses fetching) */\n  metadata?: NFTMetadata;\n}\n\nconst NFTCardContent = React.forwardRef<HTMLDivElement, NFTCardProps>(\n  (\n    {\n      mintAddress,\n      className,\n      showAttributes = false,\n      showCollection = true,\n      showPrice = false,\n      variant = \"default\",\n      isLoading: externalLoading = false,\n      onClick,\n      metadata: customMetadata,\n      ...props\n    },\n    ref,\n  ) => {\n    const mintStr = React.useMemo(() => {\n      return typeof mintAddress === \"string\"\n        ? mintAddress\n        : mintAddress.toBase58();\n    }, [mintAddress]);\n\n    const [metadata, setMetadata] = useState<NFTMetadata | null>(null);\n    const [price, setPrice] = useState<NFTPrice | null>(null);\n    const [queryLoading, setQueryLoading] = useState(false);\n    const [priceLoading, setPriceLoading] = useState(false);\n    const [error, setError] = useState<Error | null>(null);\n    const [copied, setCopied] = useState(false);\n\n    useEffect(() => {\n      if (!customMetadata && mintStr) {\n        setQueryLoading(true);\n        setError(null);\n\n        fetchNFTMetadata(mintStr)\n          .then((data) => {\n            setMetadata(data);\n            setQueryLoading(false);\n          })\n          .catch((err) => {\n            setError(err);\n            setQueryLoading(false);\n            throw err;\n          });\n      }\n    }, [mintStr, customMetadata]);\n\n    useEffect(() => {\n      if (showPrice && mintStr) {\n        setPriceLoading(true);\n        setError(null);\n\n        fetchNFTPrice(mintStr)\n          .then((data) => {\n            setPrice(data);\n            setPriceLoading(false);\n          })\n          .catch((err) => {\n            setError(err);\n            setPriceLoading(false);\n            throw err;\n          });\n      }\n    }, [mintStr, showPrice]);\n\n    const finalMetadata = customMetadata || metadata;\n    const isLoading = externalLoading || queryLoading || priceLoading;\n\n    const handleCopyAddress = async () => {\n      try {\n        await navigator.clipboard.writeText(mintStr);\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2000);\n      } catch (err) {\n        console.error('Failed to copy address:', err);\n      }\n    };\n\n    const cardVariants = {\n      default: \"p-4 space-y-3\",\n      compact: \"p-3 space-y-2\",\n      detailed: \"p-6 space-y-4\",\n    };\n\n    const imageVariants = {\n      default: \"h-48\",\n      compact: \"h-32\",\n      detailed: \"h-64\",\n    };\n\n    if (isLoading) {\n      return (\n        <div\n          ref={ref}\n          className={cn(\n            \"relative overflow-hidden rounded-xl border border-border/50 bg-gradient-to-br from-card to-card/80 backdrop-blur-sm text-card-foreground shadow-lg\",\n            cardVariants[variant],\n            className,\n          )}\n          {...props}\n        >\n          <div\n            className={cn(\n              \"flex items-center justify-center bg-gradient-to-br from-muted/50 to-muted rounded-lg shadow-inner\",\n              imageVariants[variant],\n            )}\n          >\n            <Loader2 className=\"h-8 w-8 animate-spin text-primary/60\" />\n          </div>\n          <div className=\"space-y-3\">\n            <div className=\"h-4 bg-gradient-to-r from-muted to-muted/50 rounded-lg animate-pulse\" />\n            <div className=\"h-3 bg-gradient-to-r from-muted/80 to-muted/30 rounded-lg w-2/3 animate-pulse\" />\n          </div>\n        </div>\n      );\n    }\n\n    if (error) {\n      throw error;\n    }\n\n    if (!finalMetadata) {\n      return (\n        <div\n          ref={ref}\n          className={cn(\n            \"relative overflow-hidden rounded-xl border border-border/50 bg-gradient-to-br from-card to-card/80 backdrop-blur-sm text-card-foreground shadow-lg\",\n            cardVariants[variant],\n            className,\n          )}\n          {...props}\n        >\n          <div\n            className={cn(\n              \"flex items-center justify-center bg-gradient-to-br from-muted/50 to-muted rounded-lg shadow-inner\",\n              imageVariants[variant],\n            )}\n          >\n            <ImageIcon className=\"h-8 w-8 text-muted-foreground/60\" />\n          </div>\n          <div className=\"space-y-2\">\n            <h3 className=\"font-semibold text-sm text-muted-foreground\">No NFT data</h3>\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-xs text-muted-foreground/80 font-mono\">\n                {shortAddress(mintStr)}\n              </p>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleCopyAddress();\n                }}\n                className=\"flex h-6 w-6 items-center justify-center rounded-md bg-muted/50 hover:bg-muted transition-colors duration-200\"\n                title={copied ? \"Copied!\" : \"Copy NFT Address\"}\n              >\n                {copied ? (\n                  <Check className=\"h-3 w-3 text-green-400\" />\n                ) : (\n                  <Copy className=\"h-3 w-3\" />\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <motion.div\n        ref={ref}\n        className={cn(\n          \"group relative overflow-hidden rounded-xl border border-border/50 bg-gradient-to-br from-card to-card/80 backdrop-blur-sm text-card-foreground shadow-lg transition-all duration-300\",\n          onClick && \"cursor-pointer hover:shadow-2xl hover:shadow-primary/10 hover:scale-[1.03] hover:border-primary/30\",\n          cardVariants[variant],\n          className,\n        )}\n        onClick={onClick}\n        whileHover={onClick ? { y: -4, rotateY: 2 } : undefined}\n        whileTap={onClick ? { scale: 0.97 } : undefined}\n        {...props}\n      >\n        {/* NFT Image */}\n        <div\n          className={cn(\n            \"relative overflow-hidden rounded-lg bg-gradient-to-br from-muted/50 to-muted shadow-inner\",\n            imageVariants[variant],\n          )}\n        >\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10\" />\n          {finalMetadata.image ? (\n            <OptimizedImage\n              src={finalMetadata.image}\n              alt={finalMetadata.name || shortAddress(mintStr)} // ✅ fallback to short address\n              className=\"h-full w-full object-cover transition-all duration-500 group-hover:scale-110 group-hover:brightness-110\"\n              fallbackSrc=\"/placeholder-nft.png\"\n              lazy={true}\n            />\n          ) : (\n            <div className=\"flex h-full items-center justify-center bg-gradient-to-br from-muted to-muted/80\">\n              <ImageIcon className=\"h-8 w-8 text-muted-foreground/60\" />\n            </div>\n          )}\n\n          <div className=\"absolute top-3 right-3 z-20 flex gap-2\">\n            {/* Copy Address Button */}\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleCopyAddress();\n              }}\n              className=\"flex h-8 w-8 items-center justify-center rounded-full bg-black/60 backdrop-blur-sm text-white hover:bg-black/80 hover:scale-110 transition-all duration-200 shadow-lg border border-white/20\"\n              title={copied ? \"Copied!\" : \"Copy NFT Address\"}\n            >\n              {copied ? (\n                <Check className=\"h-3.5 w-3.5 text-green-400\" />\n              ) : (\n                <Copy className=\"h-3.5 w-3.5\" />\n              )}\n            </button>\n            \n            {/* External Link Button */}\n            {finalMetadata.external_url && (\n              <a\n                href={finalMetadata.external_url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"flex h-8 w-8 items-center justify-center rounded-full bg-black/60 backdrop-blur-sm text-white hover:bg-black/80 hover:scale-110 transition-all duration-200 shadow-lg border border-white/20\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <ExternalLink className=\"h-3.5 w-3.5\" />\n              </a>\n            )}\n          </div>\n        </div>\n\n        {/* NFT Info */}\n        <div className=\"space-y-2\">\n          <div>\n            <div className=\"flex items-center justify-between\">\n              <h3\n                className={cn(\n                  \"font-semibold leading-tight\",\n                  variant === \"compact\" ? \"text-sm\" : \"text-base\",\n                )}\n              >\n                {finalMetadata.name || shortAddress(mintStr)} {/* ✅ fallback */}\n              </h3>\n\n              {showPrice && price && (\n                <div className=\"px-3 py-1.5 bg-gradient-to-r from-primary/10 to-primary/5 rounded-full border border-primary/20\">\n                  <p className=\"text-sm font-bold text-primary\">\n                    {Number(price.price).toFixed(2)} {price.currency || \"SOL\"}\n                  </p>\n                </div>\n               )}\n            </div>\n\n            {showCollection && finalMetadata.collection?.name && (\n              <p className=\"text-xs text-muted-foreground\">\n                {shortAddress(finalMetadata.collection.name)}\n              </p>\n            )}\n          </div>\n\n\n\n          {showAttributes &&\n            finalMetadata.attributes &&\n            finalMetadata.attributes.length > 0 && (\n              <div className=\"space-y-2\">\n                <p className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">\n                  Attributes\n                </p>\n                <div className=\"flex flex-wrap gap-1.5\">\n                  {finalMetadata.attributes\n                    .slice(0, variant === \"detailed\" ? 6 : 3)\n                    .map((attr, index) => (\n                      <span\n                        key={index}\n                        className=\"inline-flex items-center rounded-lg bg-gradient-to-r from-secondary to-secondary/80 px-2.5 py-1.5 text-xs font-semibold shadow-sm border border-secondary/50 hover:shadow-md transition-shadow duration-200\"\n                      >\n                        {attr.trait_type}: {attr.value}\n                      </span>\n                    ))}\n                  {finalMetadata.attributes.length >\n                    (variant === \"detailed\" ? 6 : 3) && (\n                    <span className=\"inline-flex items-center rounded-lg bg-gradient-to-r from-muted to-muted/80 px-2.5 py-1.5 text-xs font-medium text-muted-foreground border border-muted/50\">\n                      +\n                      {finalMetadata.attributes.length -\n                        (variant === \"detailed\" ? 6 : 3)}{\" \"}\n                      more\n                    </span>\n                  )}\n                </div>\n              </div>\n            )}\n        </div>\n      </motion.div>\n    );\n  },\n);\n\nNFTCardContent.displayName = \"NFTCardContent\";\n\nconst NFTCard = React.forwardRef<HTMLDivElement, NFTCardProps>((props, ref) => {\n  return (\n    <APIErrorBoundary onRetry={() => window.location.reload()}>\n      <NFTCardContent {...props} ref={ref} />\n    </APIErrorBoundary>\n  );\n});\n\nNFTCard.displayName = \"NFTCard\";\n\nexport { NFTCard };\n",
      "type": "registry:ui",
      "target": "components/soldevkit-ui/nft/nft-card.tsx"
    }
  ]
}